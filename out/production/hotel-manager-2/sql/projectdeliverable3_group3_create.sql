CREATE DATABASE IF NOT EXISTS HOTEL_MANAGEMENT;
USE HOTEL_MANAGEMENT;
CREATE TABLE IF NOT EXISTS GUEST (
    GovernmentID VARCHAR(100) PRIMARY KEY,
    Name VARCHAR(100),
    Address VARCHAR(255),
    Email VARCHAR(100),
    PhoneNumber VARCHAR(20),
    CardNumber VARCHAR(20) NOT NULL
);

CREATE TABLE IF NOT EXISTS HOTEL (
    HotelID VARCHAR(20) PRIMARY KEY,
    HotelName VARCHAR(100),
    Address VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS ROOM (
    RoomNumber VARCHAR(10),
    HotelID VARCHAR(20),
    Floor INT NOT NULL,
    RoomType VARCHAR(100),
    PRIMARY KEY (RoomNumber, HotelID),
    FOREIGN KEY (HotelID) REFERENCES HOTEL(HotelID)
);

CREATE TABLE IF NOT EXISTS RESERVATION (
    BookingID VARCHAR(100) PRIMARY KEY,
    CheckInDate DATE,
    CheckOutDate DATE,
    CostPerNight DOUBLE,
    RoomNumber VARCHAR(10),
    HotelID VARCHAR(20),
    GovernmentID VARCHAR(100),
    FOREIGN KEY (RoomNumber, HotelID) REFERENCES ROOM(RoomNumber, HotelID),
    FOREIGN KEY (GovernmentID) REFERENCES GUEST(GovernmentID)
);

CREATE TABLE IF NOT EXISTS COUNTER (
    name      VARCHAR(50) PRIMARY KEY,
    next_val  INT NOT NULL
    );

INSERT IGNORE INTO COUNTER(name, next_val) VALUES ('RESERVATION', 1);
